<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui">


	<h:form id="formOrdem" prependId="false">
	            
	    <p:dialog 			id			=		"ordemDlg" 
	    					header		=		"Entre com o número da ordem de Produção" 
	    					widgetVar	=		"ordemDlg" 
	    					resizable	=		"false"
	    					responsive	=		"true" 
	    					modal		=		"true">
	    		
	        	<h:panelGrid columns="2" cellpadding="5">
	        
		            <h:outputLabel 		id			=	"ordemLb"
		            					for			=	"ordem" 
		            					value		=	"Número da ordem de produção" />
		            
		            <p:inputText 		id				=	"ordem" 
		            					value			=	"#{ordemProducaoMB.numOrdem}" 
				            			required		=	"true"
				            			label			=	"ordemLb"
				            			requiredMessage	=	"Número da ordem de produção requerido"/>
		                					
		            <f:facet name="footer">
		            
		                <p:commandButton 	id 				=	"btConfirmar"
		                					value			=	"Confirmar"
		                					styleClass		=	"PurpleButton RaisedButton"
		                					process			=	"@this formOrdem:ordem"
		                					actionListener	=	"#{ordemProducaoMB.consultaOrdem(listener)}"
		                					update			=	"ordemDlg ordemItensDlg"
		                					oncomplete		=	"handleOrdem(xhr, status, args, #{onlyOrdem});">
		                	
		                </p:commandButton>
		                
		            </f:facet>
	            
	        </h:panelGrid>
	    </p:dialog>
	    
	</h:form>
	
	<script type="text/javascript">
	
	    function handleOrdem(xhr, status, args, onlyOrdem) {
	    	if( !args.invalidate){
		        if(onlyOrdem) {
		        	PF('ordemDlg').hide();
		        }
		        else {
		        	PF('ordemDlg').hide(); 
		        	PF('ordemItensDlg').show();
		        }
		    }
	    }
	    
	</script>
	
	<ui:include src="/cadastros/ordemItensDialog.xhtml">
		<ui:param name="formPatern" value="#{formPatern}" />
		<ui:param name="listener"  value="#{listener}" />
	</ui:include>
	
</ui:composition>